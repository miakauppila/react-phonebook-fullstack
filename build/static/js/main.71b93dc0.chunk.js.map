{"version":3,"sources":["components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","props","onSubmit","addNew","required","value","newName","onChange","onChangeNameHandler","newNumber","onChangeNumberHandler","type","Person","person","onDelete","name","number","onClick","id","Persons","personsToShow","map","key","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","errorMessage","className","App","useState","persons","setPersons","setNewName","setNewNumber","filterOn","setFilterOn","setMessage","setErrorMessage","useEffect","console","log","axiosService","receivedPersons","length","wordToMatch","filter","regex","RegExp","match","findMatches","e","target","preventDefault","personObject","personToSearch","find","toLowerCase","window","confirm","returnedData","setTimeout","catch","error","concat","personToDelete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.71b93dc0.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={props.addNew}>\r\n        <div>\r\n          name:\r\n          <input\r\n            required\r\n            value={props.newName}\r\n            onChange={props.onChangeNameHandler}\r\n          />\r\n        </div>\r\n        <div>\r\n          number:\r\n          <input\r\n            required\r\n            value={props.newNumber}\r\n            onChange={props.onChangeNumberHandler}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = (props) => {\r\n  const { personsToShow, onDelete } = props;\r\n  return (\r\n    <ul>\r\n      {personsToShow.map((person) => (\r\n        <Person key={person.id} person={person} onDelete={onDelete} />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nconst Person = ({ person, onDelete }) => {\r\n  return (\r\n    <li>\r\n      {person.name} {person.number}{\" \"}\r\n      <button\r\n        onClick={() => {\r\n          onDelete(person.id);\r\n        }}\r\n      >\r\n        delete\r\n      </button>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\n//get data from json server with axios\r\n//functions return response data = promise\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\n//put = change the whole object\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default {\r\n  getAll: getAll,\r\n  create: create,\r\n  update: update,\r\n  deletePerson: deletePerson,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, errorMessage }) => {\r\n  if (message === null && errorMessage === null) {\r\n    return null;\r\n  }\r\n\r\n  if (message) {\r\n    return <div className=\"message\">{message}</div>;\r\n  }\r\n  if (errorMessage) {\r\n    return <div className=\"error\">{errorMessage}</div>;\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport axiosService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  //initial state must be an empty array\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterOn, setFilterOn] = useState(\"\");\n  //initial state must be null\n  const [message, setMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  //start json server: npm run server\n\n  //useEffect runs first once at start, updates state and component rerenders\n  useEffect(() => {\n    console.log(\"effect\");\n    axiosService.getAll().then((receivedPersons) => {\n      setPersons(receivedPersons);\n    });\n  }, []);\n  console.log(\"render\", persons.length, \"persons\");\n\n  const addNew = (e) => {\n    e.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    const personToSearch = persons.find(\n      (person) => person[\"name\"].toLowerCase() === newName.toLowerCase()\n    );\n    if (personToSearch) {\n      //window.alert(`${newName} is already added to phonebook`);\n      if (\n        window.confirm(\n          `${newName} is already added to the phonebook, replace the old number with a new one?`\n        )\n      ) {\n        axiosService\n          .update(personToSearch.id, personObject)\n          .then((returnedData) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== personToSearch.id ? person : returnedData\n              )\n            );\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setMessage(`Changed the data of ${returnedData.name}`);\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n          })\n          .catch((error) => {\n            console.log(\"update error\", error);\n            setErrorMessage(\n              `This person '${personToSearch.name}' was already deleted from server`\n            );\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n            setPersons(\n              persons.filter((person) => person.id !== personToSearch.id)\n            );\n          });\n      }\n    } else {\n      axiosService\n        .create(personObject)\n        .then((returnedData) => {\n          //before: setPersons([...persons, personObject]);\n          setPersons(persons.concat(returnedData));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setMessage(`Added ${returnedData.name}`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          console.log(\"create error\", error);\n        });\n    }\n  };\n\n  const onChangeNameHandler = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const onChangeNumberHandler = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const onChangeFilterHandler = (e) => {\n    setFilterOn(e.target.value);\n    //console.log(e.target.value);\n  };\n\n  function findMatches(wordToMatch, persons) {\n    return persons.filter((person) => {\n      //find out if the person matches the search\n      //creates a new rule: g= global i=insensitive\n      const regex = new RegExp(wordToMatch, \"gi\");\n      //returns a filtered array\n      return person.name.match(regex);\n    });\n  }\n\n  //returns false for empty string\n  //shows either the results of findMatches or persons full array\n  const personsToShow = filterOn ? findMatches(filterOn, persons) : persons;\n\n  const onDeleteHandler = (id) => {\n    const personToDelete = persons.find((person) => person.id === id);\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n      axiosService\n        .deletePerson(id)\n        .then((returnedData) => {\n          setPersons(persons.filter((person) => person.id !== id));\n          console.log(\"success\", returnedData);\n          setMessage(`Deleted ${personToDelete.name}`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          console.log(\"delete error\", error);\n        });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} errorMessage={errorMessage} />\n      <div>\n        Filter shown with <input onChange={onChangeFilterHandler} />\n      </div>\n      <h3>Add new</h3>\n      <PersonForm\n        addNew={addNew}\n        newName={newName}\n        onChangeNameHandler={onChangeNameHandler}\n        newNumber={newNumber}\n        onChangeNumberHandler={onChangeNumberHandler}\n      />\n      <h3>Numbers</h3>\n      <Persons personsToShow={personsToShow} onDelete={onDeleteHandler} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}