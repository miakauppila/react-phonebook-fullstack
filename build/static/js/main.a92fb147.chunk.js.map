{"version":3,"sources":["components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","props","onSubmit","addNew","className","required","placeholder","value","newName","onChange","onChangeNameHandler","newNumber","onChangeNumberHandler","type","Person","person","onDelete","name","number","onClick","id","Persons","personsToShow","map","key","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","errorMessage","App","useState","persons","setPersons","setNewName","setNewNumber","filterOn","setFilterOn","setMessage","setErrorMessage","useEffect","console","log","axiosService","receivedPersons","length","wordToMatch","filter","regex","RegExp","match","findMatches","htmlFor","e","target","preventDefault","personObject","personToSearch","find","toLowerCase","window","confirm","returnedData","setTimeout","catch","error","concat","personToDelete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"uOAgCeA,EA9BI,SAACC,GAClB,OACE,6BACE,0BAAMC,SAAUD,EAAME,QACpB,yBAAKC,UAAU,eACf,uBAAGA,UAAU,yBAAb,kBACE,2BACEC,UAAQ,EACRC,YAAY,sBACZC,MAAON,EAAMO,QACbC,SAAUR,EAAMS,uBAGpB,yBAAKN,UAAU,eACf,uBAAGA,UAAU,yBAAb,SACE,2BACEC,UAAQ,EACRC,YAAY,eACZC,MAAON,EAAMU,UACbF,SAAUR,EAAMW,yBAGpB,6BACE,4BAAQR,UAAU,+BAA+BS,KAAK,UAAtD,WCZJC,EAAS,SAAC,GAA0B,IAAxBC,EAAuB,EAAvBA,OAAQC,EAAe,EAAfA,SACxB,OACE,wBAAIZ,UAAU,mBACXW,EAAOE,KADV,WAC0BF,EAAOG,OAAQ,IACvC,4BACEL,KAAK,SACLI,KAAK,gBACLE,QAAS,WACPH,EAASD,EAAOK,KAElBhB,UAAU,2DAEV,uBAAGA,UAAU,kBAAb,aAMOiB,EA7BC,SAACpB,GAAW,IAClBqB,EAA4BrB,EAA5BqB,cAAeN,EAAaf,EAAbe,SACvB,OACE,wBAAIZ,UAAU,cACXkB,EAAcC,KAAI,SAACR,GAAD,OACjB,kBAAC,EAAD,CAAQS,IAAKT,EAAOK,GAAIL,OAAQA,EAAQC,SAAUA,S,gBCNpDS,EAAU,eA0BD,EArBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAACC,GAAD,OAAcA,EAASC,SAmB9B,EAhBA,SAACC,GAEd,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAc9B,EAVA,SAACV,EAAIW,GAElB,OADgBL,IAAMO,IAAN,UAAaR,EAAb,YAAwBL,GAAMW,GAC/BH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAQ9B,EALM,SAACV,GAEpB,OADgBM,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2BL,IAC5BQ,MAAK,SAACC,GAAD,OAAcA,EAASC,SCT9BK,EAbM,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,QAASC,EAAmB,EAAnBA,aAC/B,OAAgB,OAAZD,GAAqC,OAAjBC,EACf,KAGLD,EACK,yBAAKhC,UAAU,WAAWgC,GAE/BC,EACK,yBAAKjC,UAAU,SAASiC,QADjC,GCqJaC,EAzJH,WAAM,MAEcC,mBAAS,IAFvB,mBAETC,EAFS,KAEAC,EAFA,OAGcF,mBAAS,IAHvB,mBAGT/B,EAHS,KAGAkC,EAHA,OAIkBH,mBAAS,IAJ3B,mBAIT5B,EAJS,KAIEgC,EAJF,OAKgBJ,mBAAS,IALzB,mBAKTK,EALS,KAKCC,EALD,OAOcN,mBAAS,MAPvB,mBAOTH,EAPS,KAOAU,EAPA,OAQwBP,mBAAS,MARjC,mBAQTF,EARS,KAQKU,EARL,KAWhBC,qBAAU,WACRC,QAAQC,IAAI,kBACZC,IAAsBvB,MAAK,SAACwB,GAC1BX,EAAWW,QAEZ,IACHH,QAAQC,IAAI,SAAUV,EAAQa,OAAQ,WA6FtC,IAAM/B,EAAgBsB,EAZtB,SAAqBU,EAAad,GAChC,OAAOA,EAAQe,QAAO,SAACxC,GAGrB,IAAMyC,EAAQ,IAAIC,OAAOH,EAAa,MAEtC,OAAOvC,EAAOE,KAAKyC,MAAMF,MAMIG,CAAYf,EAAUJ,GAAWA,EAqBlE,OACE,yBAAKpC,UAAU,aACb,wBAAIA,UAAU,UAAd,aACA,6BACE,2BAAOwD,QAAQ,UAAf,+BACA,2BAAO/C,KAAK,OAAOO,GAAG,SAASd,YAAY,YAAYG,SA1C/B,SAACoD,GAC7BhB,EAAYgB,EAAEC,OAAOvD,WA2CnB,uCACA,kBAAC,EAAD,CACEJ,OAzHS,SAAC0D,GACdA,EAAEE,iBACF,IAAMC,EAAe,CACnB/C,KAAMT,EACNU,OAAQP,GAEJsD,EAAiBzB,EAAQ0B,MAC7B,SAACnD,GAAD,OAAYA,EAAM,KAASoD,gBAAkB3D,EAAQ2D,iBAEnDF,EAGAG,OAAOC,QAAP,UACK7D,EADL,gFAIA2C,EACUc,EAAe7C,GAAI4C,GAC1BpC,MAAK,SAAC0C,GACL7B,EACED,EAAQjB,KAAI,SAACR,GAAD,OACVA,EAAOK,KAAO6C,EAAe7C,GAAKL,EAASuD,MAG/C5B,EAAW,IACXC,EAAa,IACbG,EAAW,uBAAD,OAAwBwB,EAAarD,OAC/CsD,YAAW,WACTzB,EAAW,QACV,QAEJ0B,OAAM,SAACC,GACNxB,QAAQC,IAAI,eAAgBuB,GAC5B1B,EAAgB,gBAAD,OACGkB,EAAehD,KADlB,sCAGfsD,YAAW,WACTxB,EAAgB,QACf,KACHN,EACED,EAAQe,QAAO,SAACxC,GAAD,OAAYA,EAAOK,KAAO6C,EAAe7C,UAKhE+B,EACUa,GACPpC,MAAK,SAAC0C,GAEL7B,EAAWD,EAAQkC,OAAOJ,IAC1B5B,EAAW,IACXC,EAAa,IACbG,EAAW,SAAD,OAAUwB,EAAarD,OACjCsD,YAAW,WACTzB,EAAW,QACV,QAEJ0B,OAAM,SAACC,GACNxB,QAAQC,IAAI,2BAA4BuB,GACxC1B,EAAgB0B,EAAM5C,SAASC,KAAK2C,OACpCF,YAAW,WACTxB,EAAgB,QACf,SA4DLvC,QAASA,EACTE,oBAxDsB,SAACmD,GAC3BnB,EAAWmB,EAAEC,OAAOvD,QAwDhBI,UAAWA,EACXC,sBAtDwB,SAACiD,GAC7BlB,EAAakB,EAAEC,OAAOvD,UAuDpB,uCACA,kBAAC,EAAD,CAAc6B,QAASA,EAASC,aAAcA,IAC9C,kBAAC,EAAD,CAASf,cAAeA,EAAeN,SApCnB,SAACI,GACvB,IAAMuD,EAAiBnC,EAAQ0B,MAAK,SAACnD,GAAD,OAAYA,EAAOK,KAAOA,KAC1DgD,OAAOC,QAAP,iBAAyBM,EAAe1D,KAAxC,OACFkC,EACgB/B,GACbQ,MAAK,SAAC0C,GACL7B,EAAWD,EAAQe,QAAO,SAACxC,GAAD,OAAYA,EAAOK,KAAOA,MACpD6B,QAAQC,IAAI,iBAAkBoB,GAC9BxB,EAAW,WAAD,OAAY6B,EAAe1D,OACrCsD,YAAW,WACTzB,EAAW,QACV,QAEJ0B,OAAM,SAACC,GACNxB,QAAQC,IAAI,eAAgBuB,WC/HtCG,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.a92fb147.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={props.addNew}>\r\n        <div className=\"input-field\">\r\n        <i className=\"material-icons prefix\">account_circle</i>\r\n          <input\r\n            required\r\n            placeholder=\"First and last name\"\r\n            value={props.newName}\r\n            onChange={props.onChangeNameHandler}\r\n          />\r\n        </div>\r\n        <div className=\"input-field\">\r\n        <i className=\"material-icons prefix\">phone</i>\r\n          <input\r\n            required\r\n            placeholder=\"Phone number\"\r\n            value={props.newNumber}\r\n            onChange={props.onChangeNumberHandler}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button className=\"waves-effect waves-light btn\" type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = (props) => {\r\n  const { personsToShow, onDelete } = props;\r\n  return (\r\n    <ul className=\"collection\">\r\n      {personsToShow.map((person) => (\r\n        <Person key={person.id} person={person} onDelete={onDelete} />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nconst Person = ({ person, onDelete }) => {\r\n  return (\r\n    <li className=\"collection-item\">\r\n      {person.name} &#x25B6; {person.number}{\" \"}\r\n      <button\r\n        type=\"button\"\r\n        name=\"Delete button\"\r\n        onClick={() => {\r\n          onDelete(person.id);\r\n        }}\r\n        className=\"secondary-content btn-floating waves-effect waves-light\"\r\n      >\r\n        <i className=\"material-icons\">delete</i>\r\n      </button>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\n//fetch data from backend with axios (proxy is set in package.json)\r\n//functions return response data = promise\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\n//put = change the whole object\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default {\r\n  getAll: getAll,\r\n  create: create,\r\n  update: update,\r\n  deletePerson: deletePerson,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, errorMessage }) => {\r\n  if (message === null && errorMessage === null) {\r\n    return null;\r\n  }\r\n\r\n  if (message) {\r\n    return <div className=\"message\">{message}</div>;\r\n  }\r\n  if (errorMessage) {\r\n    return <div className=\"error\">{errorMessage}</div>;\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport axiosService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  //initial state must be an empty array\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterOn, setFilterOn] = useState(\"\");\n  //initial state must be null\n  const [message, setMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  //useEffect runs first once at start, updates state and component rerenders\n  useEffect(() => {\n    console.log(\"useEffect runs\");\n    axiosService.getAll().then((receivedPersons) => {\n      setPersons(receivedPersons);\n    });\n  }, []);\n  console.log(\"render\", persons.length, \"persons\");\n\n  const addNew = (e) => {\n    e.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    const personToSearch = persons.find(\n      (person) => person[\"name\"].toLowerCase() === newName.toLowerCase()\n    );\n    if (personToSearch) {\n      //when window confirm returns true\n      if (\n        window.confirm(\n          `${newName} is already added to the phonebook, replace the old number with a new one?`\n        )\n      ) {\n        axiosService\n          .update(personToSearch.id, personObject)\n          .then((returnedData) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== personToSearch.id ? person : returnedData\n              )\n            );\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setMessage(`Changed the data of ${returnedData.name}`);\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n          })\n          .catch((error) => {\n            console.log(\"update error\", error);\n            setErrorMessage(\n              `This person '${personToSearch.name}' was already deleted from server`\n            );\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n            setPersons(\n              persons.filter((person) => person.id !== personToSearch.id)\n            );\n          });\n      }\n    } else {\n      axiosService\n        .create(personObject)\n        .then((returnedData) => {\n          //before: setPersons([...persons, personObject]);\n          setPersons(persons.concat(returnedData));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setMessage(`Added ${returnedData.name}`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          console.log(\"Create new person error:\", error);\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const onChangeNameHandler = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const onChangeNumberHandler = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const onChangeFilterHandler = (e) => {\n    setFilterOn(e.target.value);\n  };\n\n  function findMatches(wordToMatch, persons) {\n    return persons.filter((person) => {\n      //find out if the person matches the search\n      //creates a new rule: g= global i=insensitive\n      const regex = new RegExp(wordToMatch, \"gi\");\n      //returns a filtered array\n      return person.name.match(regex);\n    });\n  }\n\n  //returns false for empty string\n  //shows either the results of findMatches or persons full array\n  const personsToShow = filterOn ? findMatches(filterOn, persons) : persons;\n\n  const onDeleteHandler = (id) => {\n    const personToDelete = persons.find((person) => person.id === id);\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n      axiosService\n        .deletePerson(id)\n        .then((returnedData) => {\n          setPersons(persons.filter((person) => person.id !== id));\n          console.log(\"delete success\", returnedData);\n          setMessage(`Deleted ${personToDelete.name}`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          console.log(\"delete error\", error);\n        });\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <h2 className=\"center\">Phonebook</h2>\n      <div>\n        <label htmlFor=\"filter\">Filter shown contacts with:</label>\n        <input type=\"text\" id=\"filter\" placeholder=\"Type here\" onChange={onChangeFilterHandler} />\n      </div>\n      <h3>Add new</h3>\n      <PersonForm\n        addNew={addNew}\n        newName={newName}\n        onChangeNameHandler={onChangeNameHandler}\n        newNumber={newNumber}\n        onChangeNumberHandler={onChangeNumberHandler}\n      />\n      <h3>Numbers</h3>\n      <Notification message={message} errorMessage={errorMessage} />\n      <Persons personsToShow={personsToShow} onDelete={onDeleteHandler} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}